#!/usr/bin/env node

'use strict';

var findup = require('findup-sync');
var spawnSync = require('child_process').spawnSync;
var gruntPath = findup('node_modules/{.,}bin/grunt', {cwd: __dirname});

process.title = 'grunth';

var harmonyFlags = [
    '--harmony_scoping',
//    '--harmony_modules', // We have require and ES6 modules are still in flux
    '--harmony_symbols',
    '--harmony_proxies',
//    '--harmony_collections', // new Set([2, 3]) doesn't work
    '--harmony_generators',
//    '--harmony_iteration', // no for-of, the description must be wrong
    '--harmony_numeric_literals',
    '--harmony_strings',
    '--harmony_arrays',
    '--harmony_maths',
];

spawnSync('node',
    harmonyFlags.concat([gruntPath]).concat(process.argv.slice(2)),
    {
        cwd: process.cwd(),
        stdio: 'inherit',
    }
);
